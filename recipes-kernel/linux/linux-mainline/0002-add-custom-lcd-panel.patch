From 3d5f471e198e064f5d2d8608f7d0ce5c17712e8a Mon Sep 17 00:00:00 2001
From: Tristan Seifert <tristan@tseifert.me>
Date: Tue, 21 Jun 2022 00:40:02 -0700
Subject: [PATCH 3/3] Add eastrising lcd

---
 drivers/gpu/drm/panel/panel-simple.c | 33 ++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)

diff --git a/drivers/gpu/drm/panel/panel-simple.c b/drivers/gpu/drm/panel/panel-simple.c
index 8dd7013c75f2..3f7cd4334de5 100644
--- a/drivers/gpu/drm/panel/panel-simple.c
+++ b/drivers/gpu/drm/panel/panel-simple.c
@@ -4466,7 +4466,40 @@ static const struct panel_desc arm_rtsm = {
 	.bus_format = MEDIA_BUS_FMT_RGB888_1X24,
 };
 
+
+static const struct drm_display_mode eastrising_er_tft040_1_mode = {
+	.clock = 32260,
+	.hdisplay = 800,
+	.hsync_start = 800 + 168,
+	.hsync_end = 800 + 168 + 64,
+	.htotal = 800 + 168 + 64 + 88,
+	.vdisplay = 480,
+	.vsync_start = 480 + 37,
+	.vsync_end = 480 + 37 + 2,
+	.vtotal = 480 + 37 + 2 + 8,
+};
+
+static const struct panel_desc eastrising_er_tft040_1 = {
+	.modes = &eastrising_er_tft040_1_mode,
+	.num_modes = 1,
+	.bpc = 8,
+	.size = {
+		.width = 86,
+		.height = 52,
+	},
+
+	.bus_format = MEDIA_BUS_FMT_RGB888_1X24,
+	.bus_flags = DRM_BUS_FLAG_DE_HIGH | DRM_BUS_FLAG_PIXDATA_DRIVE_POSEDGE |
+		     DRM_BUS_FLAG_SYNC_DRIVE_NEGEDGE,
+	.connector_type = DRM_MODE_CONNECTOR_DPI,
+};
+
+
 static const struct of_device_id platform_of_match[] = {
+    {
+        .compatible = "eastrising,er-tft040-1",
+        .data = &eastrising_er_tft040_1,
+    },
 	{
 		.compatible = "ampire,am-1280800n3tzqw-t00h",
 		.data = &ampire_am_1280800n3tzqw_t00h,
-- 
2.32.1 (Apple Git-133)


